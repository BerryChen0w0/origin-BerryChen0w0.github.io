---
layout: post
title: "一些基础问题（具体计算相关）"
date: 2024-04-16
---

## 给定一个多项式，如何求多项式在某一点的取值(evaluation)？

若给出的是多项式的系数形式，即给出了多项式$f(X)=\sum_{i=0}^n a_iX^i$的系数$(a_0,a_1,...,a_n)$。则$f(x)$怎样求？

？？？？

若给出的是多项式的eval形式，即给出多项式在某$n+1$个点上的取值，$\{(x_0,y_0),(x_1,y_1),...,(x_n,y_n)\}$。如何求$f(x)$？

？？？

上述两种情况，时间复杂度如何，空间复杂度如何？

## 给定一个群/域上的元素，求它的逆元？

设群$G$是素数$p$阶的，则$G$一定是生成群，群中每一个元素都可以作为生成元【注：我们用到的应该都是这种素数阶的生成群（性质非常好的群哈哈）】不妨令群上运算为乘法。

则一个元素$g\in G$的逆元就是$g^{p-1}$。要求一个元素的逆元，就是求它的$p-1$次幂。

故求一个元素的逆元需要$O(\log p)$次群运算。

这个代价是线性的。因为线性是指相对群元素的bit长度（一个群元素需要多少bit位来表示）而言成线性关系。这里群中有$p$个元素，则元素表示需要$\log p$个bit位，则求元素的逆元就是$O(n)$时间的【认为一次加法/乘法运算是$O(1)$的。$n$表示bit位数】

## 给定群上元素，求它的常数次开根？

素数阶群$G$，给定群上一元素$g$，给定常数$k$，求$\sqrt[k]{g}$

wlg说有线性时间的方法求，不过具体不记得了。这个应该也不是重点，就默认有这样的结论好了

> 是线性时间。见下一个问题的注释部分，有详解

## 对群/域元素出现在指数位置，甚至开根号位置的解释

常常看到$g\in \mathbb{G}, a\in \mathbb{F}$，计算中出现$g^a$，甚至$g^{\frac{1}{a}}$的情况。事实上，这样域元素$a$出现在指数上，对一般的域而言是没有意义的。因此这里的$\mathbb{F}$只能是数域，也就是说$a$只能是一个数。

事实上，在zk协议中出现的$\mathbb{F}$，尽管协议中都写为域，但实际上协议应用时，都是在数域上的。一方面说，从工程实现角度，$\mathbb{F}$都是数域实现（但注意，这里数域不一定是$\{0,1,...,p-1\}$，也可能是其他的数域。事实上有密码学家/数学家专门研究什么样的数域更安全更适合使用）；另一方面，协议中写成一般的域$\mathbb{F}$其实应该是不严谨的，因为要使$g^a$之类的运算有意义，$\mathbb{F}$只能是数域，而不能是一般的域。

另一种方式理解，可以认为协议定义的$g^a$，中间有一个一般域$\mathbb{F}$到数域（不妨写为$\mathbb{F}_p$吧，尽管未必就是$\mathbb{F}_p$这个数域）的同构步骤。我们知道同阶的有限素数阶的域是同构的，即$\mathbb{F}\cong \mathbb{F}_p$。则存在同构映射，把$a\in \mathbb{F}$映射到$a'\in \mathbb{F}_p$这个数上。$g^a$定义为$g^{a'}$。那么类似的，$g^{\frac{1}{a}}$就是$g^{a^{-1}}$，就是$a^{-1}\in \mathbb{F}$映射到$\frac{1}{a'}\in \mathbb{F}_p$这个数上，然后$g^{\frac{1}{a}}$就定义为$=g^{\frac{1}{a'}}$

> 这里有一个问题，设$\mathbb{F}$到$\mathbb{F}_p$的双射为$f$，有$f(a)=a'$，则$f(a^{-1})$一定是$\frac{1}{a'}$吗
> 
> 是的。因为$f$的同构映射，所以$f(a)f(a^{-1})=f(1_{\mathbb{F}})=1_{\mathbb{F}_p}$，则$f(a^{-1})$一定是$f(a)$的逆元

> 用这个来解释上面群元素开常数次方的问题：出现$\sqrt[k]{g}$这种东西，往往都是$g^{\frac{1}{k}}$这样的形式，其中$k$也一般都是$\mathbb{F}$的元素。所以其实所谓开常数次方，其实就是$g^{\frac{1}{k'}}$。要注意的是，$\frac{1}{k'}$并不是一个分数，它是$k'$在$\mathbb{F}_p$数域上的逆元，实际上也是一个整数！所以$\sqrt[k]{g}$也是一个群元素$g$的整数次幂！
>
> 考虑计算$\sqrt[k]{g}$的代价：首先求$k$的逆元（实际上是映射到数域上的逆元），这个逆元就是$k^{p-1}$，需要$O(\log p)$个域运算，是$O(n)$的线性时间。然后求$g^{k'^{-1}}$这个$g$的若干次幂，需要$O(\log k'^{-1})$个群运算，也是线性时间内的。所以，整体上是$O(n)$时间的

## 拉格朗日插值具体计算效率
给定向量$y=(y_1,...,y_n)$，将其视为$x=(x_1,...,x_n)$上的取值，现在插值求多项式$f(X)$，用Lagrange interpolation具体效率如何？【如果协议中使用，一般是$X=\Omega=\{\omega^1,...,\omega^n\}$。假如是这样，计算效率能有提升吗？】

> 附：Lagrange interpolation做法
>
> 【抄一下网上或PAZK】
>
> 一个reference:https://www.cnblogs.com/crashed/p/13124448.html


## FFT是怎么做的？它在SNARK里什么位置发挥作用？它效率如何？

【FFT具体做法】

【在SNARK里的用处：似乎多项式插值、多项式乘法、多项式除法都用它？这些多项式运算具体是怎么用FFT完成的呢？】

【效率？】